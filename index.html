<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title style="color: green;">Snake Game</title>
  <style>
    /* –ù–∞–∑–≤—É –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ —Å—Ç–∏–ª—ñ–∑—É—î–º–æ –∑–µ–ª–µ–Ω–∏–º, –∞ –Ω–µ —Ç—ñ–ª—å–∫–∏ –≤ —Ç–µ–≥–µ <title> */
    h1 {
      color: #00ff00;
      text-shadow: 0 0 10px #00ff00;
    }

    body {
      overscroll-behavior: none;
      touch-action: none;
      font-family: "Segoe Print", cursive;
      color: white;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: url("https://pbs.twimg.com/media/G5GidTqWkAI0lOu?format=jpg&name=large") no-repeat center center fixed;
      background-size: cover;
      background-position: center;
      box-sizing: border-box;
    }

    .content {
      text-align: center;
      background: rgba(0, 0, 0, 0.5);
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 0 30px rgba(0, 0, 0, 0.7);
    }

    .menu, .settings, .game-over {
      display: none;
    }

    .menu {
      display: block;
    }

    .game {
      display: none;
    }

    canvas {
      width: 90vw;
      max-width: 400px;
      height: auto;
      background-color: rgba(0, 0, 0, 0.7);
      border-radius: 8px;
      box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
      display: block;
      margin: auto;
    }

    button {
      background-color: white;
      color: black;
      border: none;
      padding: 10px 20px;
      font-size: 18px;
      cursor: pointer;
      margin: 10px;
      border-radius: 5px;
      font-family: "Segoe Print", cursive;
      transition: all 0.3s;
    }

    button:hover {
      background-color: #ddd;
      transform: scale(1.05);
    }

    .info-text {
      margin-top: 40px;
      font-size: 14px;
      opacity: 0.8;
      white-space: nowrap;
      text-align: center;
      line-height: 1.4;
    }
  </style>
</head>
<body>
  <div class="content">
    <div id="menu" class="menu">
      <h1>Snake Game</h1>
      <p>Best Score: <span id="bestScore">0</span></p>
      <button onclick="startGame()">Start</button>
      <button onclick="openSettings()">Setting</button>

      <div class="info-text">
  <button id="whatsNewBtn" 
    style="color: #00ffff; font-size: 14px; font-weight: 600;
           text-decoration: underline; background: none; border: none;
           cursor: pointer; margin-bottom: 4px;">
    What's New?
  </button><br>
  It's better to play on PC!<br>
  Controls: WASD and Swipe on the screen<br>
  Ver 1.9.5
</div>

<!-- –í—ñ–∫–Ω–æ What's New -->
<div id="whatsNewModal" 
  style="display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.6); 
         justify-content: center; align-items: center; z-index: 100;">
  <div style="background: #111; color: white; border-radius: 15px; border: 2px solid #00ffff;
              padding: 20px; width: 300px; text-align: center; box-shadow: 0 0 20px #00ffff;">
    <h2 style="color: #00ffff; margin-bottom: 10px;">What's New ‚ú®</h2>
    <ul style="text-align: left; font-size: 14px; list-style: none; padding-left: 10px;">
      <li>‚ùî <b>Added "What's New?"</b></li>
      <li>üí° <b>Added neon backlight</b></li>
      <li>üé® <b>Added new colors:</b></li>
      <li style="padding-left: 15px;">üü† Orange</li>
      <li style="padding-left: 15px;">üü£ Purple</li>
      <li style="padding-left: 15px;">üíó Pink</li>
    </ul>
    <button id="closeModal" 
      style="margin-top: 15px; background: #00ffff; color: black; font-weight: bold; 
             border: none; padding: 6px 12px; border-radius: 10px; cursor: pointer;">
      Close
    </button>
  </div>
</div>
</div>

    <div id="settings" class="settings">
      <h2>Settings</h2>
      <label>Snake speed: <span id="speedLabel">(X1)</span></label>
      <input type="range" id="speed" min="0.25" max="2" step="0.25" value="1" onchange="updateSpeed()" />
      <br />
      <label>The color of the Snake:</label>
      <select id="snakeColor">
        <option value="green" selected>Green</option>
        <option value="white">White</option>
        <option value="blue">Blue</option>
        <option value="yellow">Yellow</option>
        <option value="orange">Orange</option>
        <option value="purple">Purple</option>
        <option value="pink">Pink</option>
      </select>
      <br />
      <button onclick="closeSettings()">Back</button>
    </div>

    <div id="game" class="game">
      <canvas id="gameCanvas" width="400" height="400"></canvas>
      <p>Score: <span id="score">0</span></p>
    </div>

    <div id="gameOver" class="game-over">
      <h2>Game Over!</h2>
      <p>Score: <span id="finalScore">0</span></p>
      <button onclick="startGame()">Try Again</button>
      <button onclick="goToMenu()">Back</button>
    </div>
  </div>

  <script>
    let menu = document.getElementById("menu");
    let settings = document.getElementById("settings");
    let game = document.getElementById("game");
    let gameOver = document.getElementById("gameOver");
    let canvas = document.getElementById("gameCanvas");
    let ctx = canvas.getContext("2d");
    let scoreEl = document.getElementById("score");
    let finalScoreEl = document.getElementById("finalScore");
    let bestScoreEl = document.getElementById("bestScore");
    let snakeColor = "green";
    let speed = 1;
    let snake, apple, direction, score, interval;
    let bestScore = localStorage.getItem('snakeBestScore') || 0;
    bestScoreEl.innerText = bestScore;

    function openSettings() {
      menu.style.display = "none";
      settings.style.display = "block";
    }

    function closeSettings() {
      settings.style.display = "none";
      menu.style.display = "block";
    }

    function updateSpeed() {
      speed = document.getElementById("speed").value;
      let labels = {
        "0.25": "X0.25", "0.5": "X0.5", "0.75": "X0.75", "1": "X1",
        "1.25": "X1.25", "1.5": "X1.5", "1.75": "X1.75", "2": "X2"
      };
      document.getElementById("speedLabel").innerText = `(${labels[speed] || 'X1'})`;
    }

    function generateApple() {
      let newApple;
      do {
        newApple = {
          x: Math.floor(Math.random() * 20),
          y: Math.floor(Math.random() * 20)
        };
      } while (snake.some(part => part.x === newApple.x && part.y === newApple.y));
      return newApple;
    }

    function startGame() {
      menu.style.display = "none";
      gameOver.style.display = "none";
      game.style.display = "block";
      snakeColor = document.getElementById("snakeColor").value;
      runGame();
    }

    function goToMenu() {
      gameOver.style.display = "none";
      menu.style.display = "block";
    }

    function runGame() {
      snake = [{x: 10, y: 10}];
      apple = generateApple();
      direction = "RIGHT";
      score = 0;
      scoreEl.innerText = score;
      clearInterval(interval);
      interval = setInterval(updateGame, 200 / parseFloat(speed));
      document.addEventListener("keydown", changeDirection);
    }

    function updateGame() {
      let head = { ...snake[0] };
      if (direction === "UP") head.y--;
      if (direction === "DOWN") head.y++;
      if (direction === "LEFT") head.x--;
      if (direction === "RIGHT") head.x++;

      snake.unshift(head);

      for (let i = 1; i < snake.length; i++) {
        if (snake[i].x === head.x && snake[i].y === head.y) {
          gameOverScreen();
          return;
        }
      }

      if (head.x === apple.x && head.y === apple.y) {
        score++;
        scoreEl.innerText = score;
        apple = generateApple();
      } else {
        snake.pop();
      }

      if (head.x < 0 || head.x >= 20 || head.y < 0 || head.y >= 20) {
        gameOverScreen();
        return;
      }

      drawGame();
    }

    function drawGame() {
      for (let y = 0; y < 20; y++) {
        for (let x = 0; x < 20; x++) {
          ctx.fillStyle = (x + y) % 2 === 0 ? "black" : "#212121";
          ctx.fillRect(x * 20, y * 20, 20, 20);
        }
      }

      snake.forEach((part, index) => {
  // –£–≤—ñ–º–∫–Ω–µ–Ω–Ω—è –Ω–µ–æ–Ω–æ–≤–æ—ó –ø—ñ–¥—Å–≤—ñ—Ç–∫–∏
  ctx.shadowBlur = 15;
  ctx.shadowColor = snakeColor;
  ctx.fillStyle = snakeColor;
  ctx.fillRect(part.x * 20, part.y * 20, 20, 20);

  // –í–∏–º–∏–∫–∞—î–º–æ —Ç—ñ–Ω—å –ø—ñ—Å–ª—è –º–∞–ª—é–≤–∞–Ω–Ω—è, —â–æ–± —ñ–Ω—à—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ (—è–±–ª—É–∫–æ, —Ñ–æ–Ω) –Ω–µ —Å–≤—ñ—Ç–∏–ª–∏—Å—è
  ctx.shadowBlur = 0;
  ctx.shadowColor = "transparent";

  // –û—á—ñ –∑–º—ñ–π–∫–∏
  if (index === 0) {
    ctx.fillStyle = "black";
    let cx = part.x * 20;
    let cy = part.y * 20;

    if (direction === "UP" || direction === "DOWN") {
      ctx.beginPath();
      ctx.arc(cx + 5, cy + (direction === "UP" ? 5 : 15), 2, 0, Math.PI * 2);
      ctx.fill();
      ctx.beginPath();
      ctx.arc(cx + 15, cy + (direction === "UP" ? 5 : 15), 2, 0, Math.PI * 2);
      ctx.fill();
    } else {
      ctx.beginPath();
      ctx.arc(cx + (direction === "LEFT" ? 5 : 15), cy + 5, 2, 0, Math.PI * 2);
      ctx.fill();
      ctx.beginPath();
      ctx.arc(cx + (direction === "LEFT" ? 5 : 15), cy + 15, 2, 0, Math.PI * 2);
      ctx.fill();
    }
  }
});

      ctx.beginPath();
      ctx.fillStyle = "red";
      ctx.arc(apple.x * 20 + 10, apple.y * 20 + 10, 10, 0, Math.PI * 2);
      ctx.fill();
    }

    function gameOverScreen() {
      clearInterval(interval);
      game.style.display = "none";
      gameOver.style.display = "block";
      finalScoreEl.innerText = score;
      if (score > bestScore) {
        bestScore = score;
        localStorage.setItem('snakeBestScore', bestScore);
        bestScoreEl.innerText = bestScore;
      }
    }

    function changeDirection(e) {
      const keys = {"W": "UP", "A": "LEFT", "S": "DOWN", "D": "RIGHT"};
      if (keys[e.key.toUpperCase()]) {
        let newDirection = keys[e.key.toUpperCase()];
        if (
          (direction === "UP" && newDirection === "DOWN") ||
          (direction === "DOWN" && newDirection === "UP") ||
          (direction === "LEFT" && newDirection === "RIGHT") ||
          (direction === "RIGHT" && newDirection === "LEFT")
        ) return;
        direction = newDirection;
      }
    }

    // –°–µ–Ω—Å–æ—Ä–Ω–µ –∫–µ—Ä—É–≤–∞–Ω–Ω—è
    let touchStartX = 0;
    let touchStartY = 0;
    let touchEndX = 0;
    let touchEndY = 0;

    document.body.style.overflow = "hidden";
    document.body.addEventListener("touchmove", (e) => e.preventDefault(), { passive: false });

    canvas.addEventListener("touchstart", (e) => {
      e.preventDefault();
      const touch = e.touches[0];
      touchStartX = touch.clientX;
      touchStartY = touch.clientY;
    }, { passive: false });

    canvas.addEventListener("touchend", (e) => {
      e.preventDefault();
      const touch = e.changedTouches[0];
      touchEndX = touch.clientX;
      touchEndY = touch.clientY;
      handleSwipe();
    }, { passive: false });

    function handleSwipe() {
      const diffX = touchEndX - touchStartX;
      const diffY = touchEndY - touchStartY;

      if (Math.abs(diffX) > Math.abs(diffY)) {
        if (diffX > 30 && direction !== "LEFT") direction = "RIGHT";
        else if (diffX < -30 && direction !== "RIGHT") direction = "LEFT";
      } else {
        if (diffY > 30 && direction !== "UP") direction = "DOWN";
        else if (diffY < -30 && direction !== "DOWN") direction = "UP";
      }
    }
    // –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª "What's New?"
  const whatsNewBtn = document.getElementById("whatsNewBtn");
  const whatsNewModal = document.getElementById("whatsNewModal");
  const closeModal = document.getElementById("closeModal");

  whatsNewBtn.addEventListener("click", () => {
    whatsNewModal.style.display = "flex";
  });

  closeModal.addEventListener("click", () => {
    whatsNewModal.style.display = "none";
  });

  whatsNewModal.addEventListener("click", (e) => {
    if (e.target === whatsNewModal) whatsNewModal.style.display = "none";
  });
  </script>
</body>
</html>
